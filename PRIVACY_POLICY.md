# MediPrisma 隱私權政策

**最後更新日期：2025-01-29**

## 1. 前言

MediPrisma（以下簡稱「本服務」）致力於保護使用者的隱私權。本隱私權政策說明我們如何收集、使用、儲存和保護您的個人資訊及醫療資訊。

本服務是基於 SMART on FHIR 標準開發的臨床決策支援工具，專為醫療專業人員設計。我們深知醫療資訊的敏感性，並採取嚴格的安全措施保護您的資料。

## 2. 資訊收集

### 2.1 我們收集的資訊類型

#### 2.1.1 使用者帳號資訊
- **Firebase Authentication 資訊**：
  - Email 地址
  - Google 帳號資訊（如使用 Google 登入）
  - 使用者 ID（Firebase UID）

#### 2.1.2 臨床資料（透過 SMART on FHIR）
本服務透過 SMART on FHIR 標準從電子病歷系統（EHR）存取以下資料：
- 病患基本資料（姓名、性別、出生日期）
- 診斷資料（Conditions）
- 用藥資料（Medications、Allergies）
- 檢驗報告（Observations、DiagnosticReports）
- 就診記錄（Encounters）
- 處置記錄（Procedures）

**重要說明**：
- 這些資料**僅在您的瀏覽器中處理**，不會傳送到我們的伺服器
- 資料存取需要您明確授權（OAuth 2.0 + PKCE）
- 您可以隨時撤銷授權

#### 2.1.3 AI 對話記錄
- 您與 AI 的對話內容
- 對話時間戳記
- 使用的 AI 模型資訊
- 對話所屬的病患 FHIR ID（用於分類）

#### 2.1.4 使用者設定
- Chat Templates（對話範本）
- Clinical Insights Panels（臨床洞察面板）
- AI 模型偏好設定
- 介面語言偏好

#### 2.1.5 技術資訊
- 瀏覽器類型和版本
- 作業系統
- IP 地址（僅用於安全監控）
- 存取時間和日期

### 2.2 我們不收集的資訊

- ❌ **API Keys**：您的 OpenAI、Gemini、Perplexity API 金鑰僅儲存在您的瀏覽器本地，**絕不傳送到我們的伺服器**
- ❌ **完整病歷內容**：FHIR 資料僅在瀏覽器中處理，不儲存在我們的資料庫
- ❌ **圖片檔案**：上傳的圖片僅用於 AI 分析，不儲存在 Firestore

## 3. 資訊使用

### 3.1 使用目的

我們收集和使用您的資訊僅用於以下目的：

#### 3.1.1 提供核心服務
- 執行 SMART on FHIR 認證和授權
- 提供 AI 對話和臨床洞察功能
- 儲存和同步您的對話歷史
- 保存您的個人化設定

#### 3.1.2 改善服務品質
- 分析使用模式以改善功能
- 偵測和修復技術問題
- 優化系統效能

#### 3.1.3 安全防護
- 偵測和防止未授權存取
- 監控異常活動
- 確保資料完整性

### 3.2 我們不會做的事

- ❌ **出售您的資料**：我們絕不出售、出租或交易您的個人資訊
- ❌ **用於行銷**：我們不會使用您的醫療資訊進行行銷
- ❌ **與第三方共享**：除非法律要求或您明確同意，否則不會與第三方共享您的資料
- ❌ **訓練 AI 模型**：您的對話內容不會用於訓練 AI 模型

## 4. 資訊儲存與安全

### 4.1 資料儲存位置

#### 4.1.1 Firebase Firestore（雲端）
以下資料儲存在 Google Cloud Platform 的 Firebase Firestore：
- 使用者帳號資訊
- AI 對話歷史
- Chat Templates 和 Clinical Insights 設定

**安全措施**：
- 資料加密傳輸（TLS 1.3）
- 資料加密儲存（AES-256）
- Firestore Security Rules 強制執行存取控制
- 定期安全稽核

#### 4.1.2 瀏覽器本地儲存（localStorage）
以下資料僅儲存在您的瀏覽器 localStorage：
- API Keys（使用 AES-GCM 256-bit 加密）
- 加密金鑰（用於加密 API Keys）
- 語言偏好設定
- 深色模式設定
- 暫存的 FHIR 資料

**安全措施**：
- API Keys 使用 AES-GCM 256-bit 加密儲存
- 加密金鑰隨機生成並持久化在 localStorage
- 資料僅存於本地，不傳送到伺服器
- 使用者可隨時清除瀏覽器資料以移除所有本地儲存

### 4.2 資料保留期限

| 資料類型 | 保留期限 | 刪除方式 |
|---------|---------|---------|
| 使用者帳號資訊 | 帳號存續期間 | 刪除帳號時自動刪除 |
| AI 對話歷史 | 帳號存續期間 | 可手動刪除或刪除帳號時自動刪除 |
| Chat Templates | 帳號存續期間 | 可手動刪除或刪除帳號時自動刪除 |
| API Keys（加密） | 持久化在 localStorage | 使用者可在設定中刪除或清除瀏覽器資料 |
| 加密金鑰 | 持久化在 localStorage | 清除瀏覽器資料時移除 |
| FHIR 資料 | 不儲存 | 僅在瀏覽器暫存，關閉分頁即清除 |
| 技術日誌 | 30 天 | 自動刪除 |

### 4.3 安全措施

我們採用多層安全防護：

#### 4.3.1 傳輸層安全
- HTTPS/TLS 1.3 加密所有資料傳輸
- 安全 Headers（HSTS、CSP、X-Frame-Options 等）

#### 4.3.2 認證與授權
- OAuth 2.0 + PKCE 標準
- Firebase Authentication 多因素認證支援
- Session 管理與自動過期

#### 4.3.3 資料保護
- API Key 加密（AES-GCM 256-bit）
- HTML Sanitization 防止 XSS 攻擊
- Firestore Security Rules 強制執行

#### 4.3.4 客戶端處理
- Tool Calling 在瀏覽器執行
- FHIR 資料不傳送到後端
- 防止 API Token 外洩

## 5. 資料共享與揭露

### 5.1 我們不會主動共享您的資料

除以下情況外，我們不會與第三方共享您的個人資訊：

### 5.2 合法要求
在以下情況下，我們可能需要揭露您的資訊：
- 遵守法律義務（如法院命令、傳票）
- 保護我們的權利和財產
- 防止詐欺或安全威脅
- 保護使用者或公眾的安全

### 5.3 第三方服務提供商

本服務使用以下第三方服務，這些服務有各自的隱私權政策：

| 服務提供商 | 用途 | 資料類型 | 隱私權政策 |
|-----------|------|---------|-----------|
| Google Firebase | 認證、資料庫 | 帳號資訊、對話歷史 | [Firebase 隱私權政策](https://firebase.google.com/support/privacy) |
| OpenAI | AI 模型（選用） | 對話內容 | [OpenAI 隱私權政策](https://openai.com/privacy/) |
| Google Gemini | AI 模型（選用） | 對話內容 | [Google 隱私權政策](https://policies.google.com/privacy) |
| Perplexity AI | 文獻搜尋（選用） | 搜尋查詢 | [Perplexity 隱私權政策](https://www.perplexity.ai/privacy) |

**重要說明**：
- 您可以選擇使用自己的 API Key，此時資料直接傳送到 AI 服務提供商
- 如使用我們提供的免費額度，資料會經過我們的 Firebase Functions 代理
- 我們不會儲存或記錄傳送到 AI 服務的內容

## 6. 您的權利

根據 GDPR 和相關隱私法規，您擁有以下權利：

### 6.1 存取權
您有權要求查看我們持有的您的個人資訊。

**如何行使**：
- 登入您的帳號查看對話歷史和設定
- 聯絡我們要求完整的資料副本

### 6.2 更正權
您有權要求更正不正確或不完整的個人資訊。

**如何行使**：
- 在設定頁面更新您的資訊
- 聯絡我們協助更正

### 6.3 刪除權（被遺忘權）
您有權要求刪除您的個人資訊。

**如何行使**：
- 在設定頁面刪除特定對話或範本
- 刪除您的帳號以移除所有資料
- 聯絡我們協助完整刪除

### 6.4 資料可攜權
您有權以結構化、常用且機器可讀的格式接收您的資料。

**如何行使**：
- 使用匯出功能下載您的對話歷史
- 聯絡我們要求完整的資料匯出

### 6.5 反對權
您有權反對我們處理您的個人資訊。

**如何行使**：
- 撤銷 SMART on FHIR 授權
- 停止使用本服務
- 刪除您的帳號

### 6.6 限制處理權
您有權要求限制我們處理您的個人資訊。

**如何行使**：
- 聯絡我們說明您的需求

## 7. Cookie 和追蹤技術

### 7.1 我們使用的 Cookie

| Cookie 類型 | 用途 | 保留期限 |
|------------|------|---------|
| 必要 Cookie | Firebase Authentication Session | Session |
| 功能 Cookie | 語言偏好、深色模式 | 1 年 |

### 7.2 我們不使用的追蹤技術

- ❌ 廣告 Cookie
- ❌ 第三方追蹤 Cookie
- ❌ 社交媒體追蹤像素
- ❌ 跨網站追蹤

### 7.3 如何管理 Cookie

您可以透過瀏覽器設定管理或刪除 Cookie。請注意，停用必要 Cookie 可能影響服務功能。

## 8. 兒童隱私

本服務不針對 13 歲以下兒童設計，我們不會故意收集兒童的個人資訊。如果您發現我們無意中收集了兒童的資訊，請立即聯絡我們，我們將儘快刪除。

## 9. 國際資料傳輸

本服務使用 Google Cloud Platform，資料可能儲存在不同國家/地區的資料中心。我們確保所有資料傳輸符合適用的資料保護法規，包括：

- 歐盟標準契約條款（Standard Contractual Clauses）
- 適當的技術和組織措施
- GDPR 合規性

## 10. 隱私權政策變更

我們可能會不時更新本隱私權政策。重大變更時，我們會：

1. 在本頁面頂部更新「最後更新日期」
2. 在應用程式中顯示通知
3. 透過 Email 通知您（如適用）

建議您定期查看本隱私權政策以了解最新資訊。

## 11. 聯絡我們

如果您對本隱私權政策有任何疑問、意見或要求，請透過以下方式聯絡我們：

- **GitHub Issues**：https://github.com/voho0000/medical-note-smart-on-fhir/issues
- **Email**：voho0000@gmail.com

我們會在收到您的請求後 30 天內回覆。

## 12. 合規聲明

### 12.1 HIPAA 合規
本服務採取適當的技術和組織措施以符合 HIPAA 要求：
- 傳輸加密（TLS 1.3）
- 儲存加密（AES-256）
- 存取控制和身份驗證
- 審計日誌
- 資料備份和災難復原

### 12.2 GDPR 合規
本服務符合 GDPR 要求：
- 合法處理基礎：使用者同意、合約履行
- 資料最小化原則
- 目的限制原則
- 資料主體權利保護
- 資料保護影響評估（DPIA）

### 12.3 其他適用法規
- 個人資料保護法（台灣）
- 醫療法相關規定
- 電子簽章法

## 13. 資料外洩通知

如果發生資料外洩事件，我們將：

1. **72 小時內**通知相關監管機關（如 GDPR 要求）
2. **立即**通知受影響的使用者
3. 採取適當的補救措施
4. 進行事件調查和改善

## 14. 免責聲明

- 本服務是臨床決策支援工具，不能取代專業醫療判斷
- AI 生成的內容僅供參考，最終決策由醫療專業人員負責
- 我們不對 AI 生成內容的準確性、完整性或適用性提供保證
- 使用者應自行驗證 AI 建議並參考實證醫學文獻

---

**本隱私權政策自 2025-01-29 起生效。**

如有任何疑問，請隨時聯絡我們。感謝您信任 MediPrisma！
